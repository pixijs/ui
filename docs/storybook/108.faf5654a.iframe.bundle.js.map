{"version":3,"file":"108.faf5654a.iframe.bundle.js","mappings":";;;AA4IA;AC3IA;;AAEA;AACA","sources":["webpack://@pixi/ui/./node_modules/@pixi/storybook-renderer/dist/chunk-SHJVHIVM.mjs","webpack://@pixi/ui/./node_modules/@storybook/addon-backgrounds/dist/preview.js"],"sourcesContent":["// src/render.ts\nimport { Application } from \"pixi.js\";\nimport equals from \"deep-equal\";\nimport { dedent } from \"ts-dedent\";\nvar pixiApp;\nvar lastApplicationOptions;\nvar storyState = null;\nvar resizeState = {\n  w: 0,\n  h: 0,\n  canvasWidth: 0,\n  canvasHeight: 0\n};\nfunction resizeDefault(w, h) {\n  return { rendererWidth: w, rendererHeight: h, canvasWidth: w, canvasHeight: h };\n}\nfunction getPixiApplication(applicationOptions) {\n  if (!equals(applicationOptions, lastApplicationOptions)) {\n    if (pixiApp) {\n      pixiApp.destroy(true, {\n        children: true,\n        texture: true,\n        baseTexture: true\n      });\n    }\n    pixiApp = new Application(applicationOptions);\n    pixiApp.view.style.display = \"block\";\n    lastApplicationOptions = applicationOptions;\n  }\n  return pixiApp;\n}\nfunction resizeApplication({\n  containerWidth,\n  containerHeight,\n  app,\n  resizeFn,\n  storyObject,\n  force = false\n}) {\n  const { view, renderer } = app;\n  const newSize = resizeFn(containerWidth, containerHeight);\n  if (force || resizeState.w !== newSize.rendererWidth || resizeState.h !== newSize.rendererHeight || resizeState.canvasWidth !== newSize.canvasWidth || resizeState.canvasHeight !== newSize.canvasHeight) {\n    resizeState.w = newSize.rendererWidth;\n    resizeState.h = newSize.rendererHeight;\n    resizeState.canvasWidth = newSize.canvasWidth;\n    resizeState.canvasHeight = newSize.canvasHeight;\n    view.style.width = `${newSize.canvasWidth}px`;\n    view.style.height = `${newSize.canvasHeight}px`;\n    window.scrollTo(0, 0);\n    renderer.resize(resizeState.w, resizeState.h);\n    storyObject?.resize?.(resizeState.w, resizeState.h);\n  }\n}\nfunction initResize({\n  app,\n  resizeFn,\n  storyObject\n}) {\n  const storyResizeHandler = (e) => resizeApplication({\n    containerWidth: window.innerWidth,\n    containerHeight: window.innerHeight,\n    app,\n    resizeFn,\n    storyObject\n  });\n  window.addEventListener(\"resize\", storyResizeHandler);\n  resizeApplication({\n    containerWidth: window.innerWidth,\n    containerHeight: window.innerHeight,\n    app,\n    resizeFn,\n    storyObject,\n    force: Boolean(storyObject?.resize)\n  });\n  return storyResizeHandler;\n}\nfunction addStory({\n  app,\n  resizeFn,\n  storyObject\n}) {\n  const storyResizeHandler = initResize({\n    app,\n    resizeFn,\n    storyObject\n  });\n  app.stage.addChild(storyObject.view);\n  if (storyObject.update) {\n    app.ticker.add(storyObject.update, storyObject);\n  }\n  return storyResizeHandler;\n}\nfunction removeStory({\n  app,\n  storyObject,\n  storyResizeHandler\n}) {\n  if (storyObject.update) {\n    app.ticker.remove(storyObject.update, storyObject);\n  }\n  app.stage.removeChild(storyObject.view);\n  window.removeEventListener(\"resize\", storyResizeHandler);\n  storyObject.destroy?.();\n}\nfunction renderToDOM({\n  storyContext,\n  storyFn,\n  kind,\n  id,\n  name,\n  showMain,\n  showError,\n  forceRemount\n}, domElement) {\n  const {\n    parameters: { pixi }\n  } = storyContext;\n  const { applicationOptions, resizeFn = resizeDefault } = pixi;\n  const app = getPixiApplication(applicationOptions);\n  if (domElement.firstChild !== app.view || forceRemount) {\n    domElement.innerHTML = \"\";\n    domElement.appendChild(app.view);\n  }\n  if (storyState) {\n    removeStory({\n      app,\n      storyObject: storyState.storyObject,\n      storyResizeHandler: storyState.resizeHandler\n    });\n    storyState = null;\n  }\n  const storyObject = storyFn();\n  showMain();\n  if (!storyObject.view) {\n    showError({\n      title: `Expecting a StoryFnPixiReturnType from the story: \"${name}\" of \"${kind}\".`,\n      description: dedent`\n        Did you forget to return the correct object from the story?\n      `\n    });\n    return () => {\n    };\n  }\n  const storyResizeHandler = addStory({ app, resizeFn, storyObject });\n  storyState = {\n    storyObject,\n    resizeHandler: storyResizeHandler\n  };\n  return () => {\n    removeStory({ app, storyObject, storyResizeHandler });\n  };\n}\n\nexport {\n  renderToDOM\n};\n","var __defProp=Object.defineProperty;var __getOwnPropDesc=Object.getOwnPropertyDescriptor;var __getOwnPropNames=Object.getOwnPropertyNames;var __hasOwnProp=Object.prototype.hasOwnProperty;var __export=(target,all)=>{for(var name in all)__defProp(target,name,{get:all[name],enumerable:!0})},__copyProps=(to,from,except,desc)=>{if(from&&typeof from==\"object\"||typeof from==\"function\")for(let key of __getOwnPropNames(from))!__hasOwnProp.call(to,key)&&key!==except&&__defProp(to,key,{get:()=>from[key],enumerable:!(desc=__getOwnPropDesc(from,key))||desc.enumerable});return to};var __toCommonJS=mod=>__copyProps(__defProp({},\"__esModule\",{value:!0}),mod);var preview_exports={};__export(preview_exports,{decorators:()=>decorators,globals:()=>globals,parameters:()=>parameters});module.exports=__toCommonJS(preview_exports);var import_preview_api=require(\"@storybook/preview-api\");var ADDON_ID=\"storybook/background\",PARAM_KEY=\"backgrounds\";var EVENTS={UPDATE:`${ADDON_ID}/update`};var import_global=require(\"@storybook/global\"),import_ts_dedent=require(\"ts-dedent\"),import_client_logger=require(\"@storybook/client-logger\"),{document,window}=import_global.global,isReduceMotionEnabled=()=>window.matchMedia(\"(prefers-reduced-motion: reduce)\").matches,getBackgroundColorByName=(currentSelectedValue,backgrounds=[],defaultName)=>{if(currentSelectedValue===\"transparent\")return\"transparent\";if(backgrounds.find(background=>background.value===currentSelectedValue))return currentSelectedValue;let defaultBackground=backgrounds.find(background=>background.name===defaultName);if(defaultBackground)return defaultBackground.value;if(defaultName){let availableColors=backgrounds.map(background=>background.name).join(\", \");import_client_logger.logger.warn(import_ts_dedent.dedent`\n        Backgrounds Addon: could not find the default color \"${defaultName}\".\n        These are the available colors for your story based on your configuration:\n        ${availableColors}.\n      `)}return\"transparent\"},clearStyles=selector=>{(Array.isArray(selector)?selector:[selector]).forEach(clearStyle)},clearStyle=selector=>{let element=document.getElementById(selector);element&&element.parentElement.removeChild(element)},addGridStyle=(selector,css)=>{let existingStyle=document.getElementById(selector);if(existingStyle)existingStyle.innerHTML!==css&&(existingStyle.innerHTML=css);else{let style=document.createElement(\"style\");style.setAttribute(\"id\",selector),style.innerHTML=css,document.head.appendChild(style)}},addBackgroundStyle=(selector,css,storyId)=>{let existingStyle=document.getElementById(selector);if(existingStyle)existingStyle.innerHTML!==css&&(existingStyle.innerHTML=css);else{let style=document.createElement(\"style\");style.setAttribute(\"id\",selector),style.innerHTML=css;let gridStyleSelector=`addon-backgrounds-grid${storyId?`-docs-${storyId}`:\"\"}`,existingGridStyle=document.getElementById(gridStyleSelector);existingGridStyle?existingGridStyle.parentElement.insertBefore(style,existingGridStyle):document.head.appendChild(style)}};var withBackground=(StoryFn,context)=>{var _a;let{globals:globals2,parameters:parameters2}=context,globalsBackgroundColor=(_a=globals2[PARAM_KEY])==null?void 0:_a.value,backgroundsConfig=parameters2[PARAM_KEY],selectedBackgroundColor=(0,import_preview_api.useMemo)(()=>backgroundsConfig.disable?\"transparent\":getBackgroundColorByName(globalsBackgroundColor,backgroundsConfig.values,backgroundsConfig.default),[backgroundsConfig,globalsBackgroundColor]),isActive=(0,import_preview_api.useMemo)(()=>selectedBackgroundColor&&selectedBackgroundColor!==\"transparent\",[selectedBackgroundColor]),selector=context.viewMode===\"docs\"?`#anchor--${context.id} .docs-story`:\".sb-show-main\",backgroundStyles=(0,import_preview_api.useMemo)(()=>{let transitionStyle=\"transition: background-color 0.3s;\";return`\n      ${selector} {\n        background: ${selectedBackgroundColor} !important;\n        ${isReduceMotionEnabled()?\"\":transitionStyle}\n      }\n    `},[selectedBackgroundColor,selector]);return(0,import_preview_api.useEffect)(()=>{let selectorId=context.viewMode===\"docs\"?`addon-backgrounds-docs-${context.id}`:\"addon-backgrounds-color\";if(!isActive){clearStyles(selectorId);return}addBackgroundStyle(selectorId,backgroundStyles,context.viewMode===\"docs\"?context.id:null)},[isActive,backgroundStyles,context]),StoryFn()};var import_preview_api2=require(\"@storybook/preview-api\");var withGrid=(StoryFn,context)=>{var _a;let{globals:globals2,parameters:parameters2}=context,gridParameters=parameters2[PARAM_KEY].grid,isActive=((_a=globals2[PARAM_KEY])==null?void 0:_a.grid)===!0&&gridParameters.disable!==!0,{cellAmount,cellSize,opacity}=gridParameters,isInDocs=context.viewMode===\"docs\",defaultOffset=parameters2.layout===void 0||parameters2.layout===\"padded\"?16:0,offsetX=gridParameters.offsetX??(isInDocs?20:defaultOffset),offsetY=gridParameters.offsetY??(isInDocs?20:defaultOffset),gridStyles=(0,import_preview_api2.useMemo)(()=>{let selector=context.viewMode===\"docs\"?`#anchor--${context.id} .docs-story`:\".sb-show-main\",backgroundSize=[`${cellSize*cellAmount}px ${cellSize*cellAmount}px`,`${cellSize*cellAmount}px ${cellSize*cellAmount}px`,`${cellSize}px ${cellSize}px`,`${cellSize}px ${cellSize}px`].join(\", \");return`\n      ${selector} {\n        background-size: ${backgroundSize} !important;\n        background-position: ${offsetX}px ${offsetY}px, ${offsetX}px ${offsetY}px, ${offsetX}px ${offsetY}px, ${offsetX}px ${offsetY}px !important;\n        background-blend-mode: difference !important;\n        background-image: linear-gradient(rgba(130, 130, 130, ${opacity}) 1px, transparent 1px),\n         linear-gradient(90deg, rgba(130, 130, 130, ${opacity}) 1px, transparent 1px),\n         linear-gradient(rgba(130, 130, 130, ${opacity/2}) 1px, transparent 1px),\n         linear-gradient(90deg, rgba(130, 130, 130, ${opacity/2}) 1px, transparent 1px) !important;\n      }\n    `},[cellSize]);return(0,import_preview_api2.useEffect)(()=>{let selectorId=context.viewMode===\"docs\"?`addon-backgrounds-grid-docs-${context.id}`:\"addon-backgrounds-grid\";if(!isActive){clearStyles(selectorId);return}addGridStyle(selectorId,gridStyles)},[isActive,gridStyles,context]),StoryFn()};var decorators=[withGrid,withBackground],parameters={[PARAM_KEY]:{grid:{cellSize:20,opacity:.5,cellAmount:5},values:[{name:\"light\",value:\"#F8F8F8\"},{name:\"dark\",value:\"#333333\"}]}},globals={[PARAM_KEY]:null};0&&(module.exports={decorators,globals,parameters});\n"],"names":[],"sourceRoot":""}